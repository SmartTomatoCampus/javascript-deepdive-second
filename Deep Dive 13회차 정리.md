# 프로퍼티 어트리뷰트

## 클로버
내부 슬롯과 메서드

내부 슬롯과 내부 메서드는 자바스크립트 엔진의 구현 알고리즘을 설명하기 위해 ECMAScript 사양에서 사용하는 의사 프로퍼티와 의사 메서드다. 
직접 개발자가 접근할 수 없지만 일부 간접적으로 접근 할 수 있기도 하다.

자바스크립트 엔진은 프로퍼티를 생성할 때 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값으로 자동 정의한다. 프로퍼티의 상태에는 (프로티의 값, 값의 갱신 가능 여부, 열거 가능 여부, 재정의 가능여부가 있다.)

프로퍼티 어트리뷰트는 자바스크립트 엔진이 관리하는 내부 상태 값인 내부 슬롯, Value, Writable, Enumerable, Configurable이 있다. 여기에 직접 접근할 수는 없고 간접 확인할 수는 있다.

프로퍼티는 데이터 프로퍼티와 접근자 프로퍼티로 나뉘어진다.

데이터 프로퍼티: 일반적으로 알고있는 키값과 벨류값으로 구성.
접근자 프로퍼티: 자체적으로 값은 없고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 호출되는 접근자 함수로 구성된 프로퍼티. 즉, 데이터 프로퍼티 값을 읽고 저장할때 도움을 주는 접근자 함수의 집합이다.

데이터 프로퍼티는 Value, Writable, Enumerable, Configurable 의 프로퍼티 어트리뷰트를 갖는다.
이것은 각각 프로퍼티의 상태를 밸류값, 변경여부, 열거여부, 재정의 여부등을 판단해 프로퍼티가 어떤 상태인지를 정한다.
---
접근자 프로퍼티는 get. set, enumerable, configurable 의 프로퍼티 어트리뷰트를 갖는다.

get은 데이터 프로퍼티 값을 읽을때 호출되는 함수다. 즉 접근자 프로퍼티 키로 프로퍼티 값에 접근했을때 호출되어 프로퍼티 값을 반환하게 도와준다.
set은 접근자 프로퍼티를 통해 데이터 프로퍼티의 값을 저장할때 호출되고 저장을 도와주는 접근자 함수이다.

프로토타입: 어떤 객체의 부모 객체의 역할을 하는 객체이다. 프로토타입은 자신의 자식 객체에게 자신의 프로퍼티와 메서드를 상속한다. 자식 객체는 프로토타입의 프로퍼티 또는 메소드를 자유롭게 사용할 수 있다. 프로토타입 체인은 단방향 링크드 리스트로 연결된 상속 구조를 말한다. 객체의 프로퍼티나 메서드가 없다면 그 부모, 즉 프로토타입의 프로퍼티나 메소드를 확인한다.

---
프로퍼티 정의
프로퍼티 정의란 새로운 프로퍼티를 추가하면서 프로퍼티 어트리뷰트를 명시적으로 정의하거나 또는
기존프로퍼티의 프로퍼티 어트리뷰트를 재정의하는 것을 말한다. 예를들어 프로퍼티 값을 갱신 가능할 수 있게 하는지, 프로퍼티를 열거 혹은 재정의할 수 있는지의 여부를 정의하는 것이다.
이것은 Object.definProperty 메서드를 사용하면 프로퍼티 어트리뷰트를 정의할 수 있다.
이 메서드는 한번에 하나의 프로퍼티만 정의할 수 있다. 여러 프로퍼티를 한번에 정의하려면 Object.definProperties를 사용하면 된다.


객체는 변경 가능한 값이다. 반대로 변경을 방지하는 다양한 메서드들이 있는데
객체 확장 금지 메서드는 객체의 프로퍼티 추가가 금지된다.
객체 밀봉 메서드는 프로퍼티 추가, 삭제, 재정의가 금지된다. 즉 값을 읽고와 사용만 가능하다
객체 동결 메서드는 프로퍼티를 읽기만 가능하다.

이것은 얕은 변경 방지로 직속 프로퍼티만 변경이 방지되고 중첩객체까지는 영향을 주지 못한다.
따라서 중첩 객체까지 변경을 방지하여 불변 객체를 구현하려면 객체를 값으로 갖는 모든 프로퍼티에 대해 재귀적으로 Object.freeze 메서드를 호출해야한다. 즉 요약하자면 모든 프로퍼티를 순회하면서 일일히 freeze 메서드를 걸어주는 것이다.

## 초생
1. 프로퍼티 어트리뷰트란 객체 내부의 각각 프로퍼티들에 대해 자바스크립트 엔진이 관리하는 프로퍼티의 상태값
2. 종류에는 데이터 프로퍼티, 접근자 프로퍼티가 있음
3. 데이터 프로퍼티는 키와 값으로 구성된 프로퍼티로 우리가 알고 있는 프로퍼티
4. 접근자 프로퍼티는 데이터 프로퍼티의 값을 읽거나 저장할때의 getter / setter 로 구성된 프로퍼티

## 경택
자바스크립트 엔진은 프로퍼티를 생성할 때 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값으로 정의한다.


프로퍼티 상태란 프로퍼티의 value(값), writable(값 갱신), enumerable(값 열거), configurable(값 재정의) 을 말한다.

프로퍼티 어트리뷰트는 내부 슬롯이며 직접 접근할 수 없다.

Object.getOwnPropertyDescriptor(객체의 참조, 프로퍼티키) 메소드로 확인할 수는 있다.

프로퍼티는 데이터 프로퍼티와 접근자 프로퍼티로 구분할 수 있다.

- 데이터 프로퍼티 = 일반적인 프로퍼티
- 접근자 프로퍼티
    - 자체적으로는 값이 없고 다른 데이터 프로퍼티  값을 읽거나 저장할 때 호출 되는 접근자 함수로 구성된 프로퍼티

    접근자 프로퍼티는 get, set, enumerable, configurable 어트리뷰트를 갖는다.

    get과 set은 getter, setter라고도 불리며 getter와 setter는 함수이고, 그 뒤의 함수의 이름이 접근자 프로퍼티다.


동작원리

1. 접근자 프로퍼티의 키를 확인. 키는 문자열이나 심벌이어야 한다.
2. 키를 검색 → {존재 ? (3) : (undefined)}
3. 키가 데이터 프로퍼티인지 접근자 프로퍼티 인지 확인
4. 접근자 프로퍼티 키의 프로퍼티 어트리뷰트의 값을 반환한다.

프로퍼티를 추가하면서 프로퍼티 어트리뷰트를 정의할 수 있고 정의되지 않는 어트리뷰트는 기본값으로 정의된다.


객체 얕은 변경 방지 메소드 3가지


Object.preventExtensions 추가만 X

Object.seal 추가, 삭제, 재정의 금지

Object.freeze 읽기만 가능

## 경찬
프로퍼티와 어트리뷰트

* 내부 슬롯, 내부 메서드

- JS의 엔진의 구현 알고리즘 설명을 위해 사용
- 직접 접근 불가능

* 프로퍼티 어트리뷰트, 프로퍼티 디스트립터 객체

- JS 엔진 -> 프로퍼티 생성 -> 프로퍼티 어트리뷰트 정의(프로퍼티의 상태): JS 엔진이 관리하는 내부 슬롯 - 직접 접근X
- 간접 접근 -> object.getOwnPropertyDescriptor(객체, 키) -> 프로퍼티 디스크립터 객체 반환(프로퍼티 어트리뷰트의 정보 제공)

* 데이터 프로퍼티

- 키, 벨류 값으로 구성
- value, writable, enumerable, configurable 프로퍼티 어트리뷰트를 가짐

* 접근자 프로퍼티

- 자체적 값X, 데이터 프로퍼티 값 읽거나 저장할 때 호출됨
- get, set, enumerable, configurable
- 데이터 프로퍼티 안에 있는 프로퍼티 -> 접근자를 통해 값을 읽거나 저장할 수 있음

=> 둘 구분 어떻게?

- object.getOwnPropertyDescriptor가 반환한 디스크립토 객체 확인

* 프로퍼티 정의?

- 프로퍼티 정의할 때 프로퍼티 어트리뷰트 선택 가능! (Object.defineProperty)

- enumerable: false => 열거X(for ...)
- writable: false => 값 변경X
- configurable: false => 삭제X, 재정의X

- Objec.defineProperty로 프로퍼티 정의시 일부 어트리뷰트 생략가능

* 객체 변경 방지

- 객체는 변할 수 있는 값이기 때문에 변경 방지하는 메서드가 있음!
- 확장X(객체확장X): Object.preventExtensions: 추가 금지(2가지: 동적, defineProperty), 삭제는 가능
- 재정의X(객체밀봉): Object.seal -> 읽기와 쓰기만 가능
- 읽기만 가능(객체 동결): Object.isFrozen
- 중첩객체 동결(불변 객체): 재귀적 Object.freeze

* 정리 & 배운것

- 프로퍼티는 프로퍼티 상태를 나타내는 어트리뷰트를 가지고 있고 개발자는 그것을 원하는 대로 설정 가능 => 객체를 만들 때 원하는 대로 옵션을 선택할 수 있다!
- 마치, 스타크래프트에서 커세어는 공중 공격만 가능하고, 벌쳐는 지상 공격만 가능하다. 질럿은 근거리 공격만 되고, 마린은 원거리, 공중 다됨. 게임 유닛의 속성을 다르게 만들었듯이 객체도 속성을 다르게 설정 가능하다!

## 쑥스럽게
1. 내부슬롯과 내부메서드는 ECMAScript 사양에서 사용하는  pseudo property(의사프로퍼티)와 pseudo method(의사메소드)다. 이중대괄호[[...]]로 감싼 이름들이 내부 슬롯과 내부 메서드다.
2. 내부슬롯과 내부메서드는 자바스크립트엔진의 내부로직이므로 원칙적으로 직접적으로 접근하거나 호출할 수 없다. 단 [[Prototype]]이라는 내부 슬롯은 던더프로토(proto)를 통해 간접적으로 접근 가능
3. JS엔진은 프로퍼티를 생성할 떄 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값으로 자동 정의한다.
  - 프로퍼티 상태란? 프로퍼티값, 값의 갱신 가능여부, 열거 가능여부, 재정의 가능여부를 뜻함.
  - 프로퍼티 어트리뷰트란? 자바스크립트 엔진이 관리하는 내부 상태 값(meta-property)인 내부슬롯[[Value]], [[Writable]], [[Enumerable]], [[Configurable]]이다. 프로퍼티 어트리뷰트에 직접 접근할 수 없지만 Object.getOwnpropertyDescriptor 메소드를 사용하여 간접적으로 확인 가능.

  Object.getOwnpropertyDescriptor메서드 사용예)
    const person = {
    name: "Lee" };
    console.log(Object.getOwnPropertyDescriptor(person, "name")); 
    // { value: 'Lee', writable: true, enumerable: true, configurable: true }

  - Object.getOwnpropertyDescriptor 메서드를 호출할 때 첫번째 매개변수에는 객체의 참조를 전달, 두번째매개변수에는 프로퍼티 키를 문자열로 전달하고, 프로퍼티 어트리뷰트정보를 제공하는 프로퍼티 디스크립터객체를 반환한다.

  - Object.getOwnpropertyDescriptors메서드(ES8에서도입됨)는 모든프로퍼티의 어트리뷰트 정보를 제공하는 프로퍼티 디스크립터 객체들을 반환한다
  Object.getOwnpropertyDescriptors메서드 사용예)
    const person = {
    name: "Lee",
    };
    person.age = 20 // 프로퍼티 추가
    console.log(Object.getOwnPropertyDescriptors(person)) 
    // {
    //  name: {
    //    value: 'Lee',
    //    writable: true,
    //    enumerable: true,
    //    configurable: true
    //  },
    //  age: { value: 20, writable: true, enumerable: true, configurable: true }
    // }
4. 프로퍼티: 데이터프로퍼티와 접근자프로퍼티로 구분
  - 데이터 프로퍼티: 키와 값으로 구성된 일반적인 프로퍼티
  - 접근자 프로퍼티: 자체적으로 값을 갖지 않고 다른 데이터 프로퍼티와 값을 읽거나 저장할 떄 호출되는 접근자 함수로 구성된 프로퍼티.
  - 접근자 함수는 getter/setter함수라고도 부른다
5. 프로퍼티 정의란? 새로운 프로퍼티를 추가하면서 프로퍼티 어트리뷰트를 명시적으로 정의하거나, 기존 프로퍼티의 프로퍼티 어트리뷰트를 재정의 하는것을 말함 (한개의 프로퍼티 정의할땐Object.defineProperty() 메서드를, 여러개의 프로퍼티를정의 할땐 Object.defineProperties() 메서드를 사용하면됨)
6. 객체변경방지 메서드
  - 객체 확장금지 Object.prventExtensions
  - 객체 밀봉 Object.seal
  - 객체 동결 Object.freeze

## 명성
의사(pseudo)는 가짜,거짓이라는 뜻을 가지고 있다.
하지만, 내부 슬롯과 메서드가 존재하지 않는다는 것은 아니다.
자바스크립트 엔진에서 실제로 동작하지만 개발자가 직접 접근할 수 없는 메서드와 프로퍼티를 말한다.

[[Prototype]]
내부 슬롯은 자바스크립트 엔진의 내부 로직이므로 직접 접근할 수 없지만
[[Prototype]] 내부 슬롯의 경우, __proto__를 통해 간접적으로 접근할 수 있다.

4가지의 프로토타입 어트리뷰트
[[Value]] [[Writable]] [[Enumerable]] [[Configurable]] 
자바스크립트 엔진은 프로퍼티를 생성할 때 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값으로 자동 정의한다.

프로퍼티의 상태
프로퍼티의 값 [[Value]]
값의 갱신 가능 여부 [[Writable]]
열거 가능 여부 [[Enumerable]]
재정의 가능 여부 [[Configurable]]을 말한다.

데이터 프로퍼티와 접근자 프로퍼티
프로퍼티는 데이터 프로퍼티와 접근자 프로퍼티로 구분할 수 있다.
- 데이터 프로퍼티
키와 값으로 구성된 일반적인 프로퍼티.
- 접근자 프로퍼티
자체적으로 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 호출되는 접근자 함수로 구성된 프로퍼티다.

getter // setter
자체적으로 값을 갖지 않는 접근자 프로퍼티가 갖는 프로퍼티 어트리뷰트는 조금 상이하다.
[[Value]]와 [[Writable]] 대신 [[Get]] [[Set]] 프로퍼티 어트리뷰트가 존재한다.
접근자 프로퍼티는 다른 데이터 프로퍼티에 접근하거나 값을 변경하는데 목적이 있다. 그렇기에[[Get]] 프로퍼티 어트리뷰트는 getter 함수를 호출하고, 호출한 결과가 프로퍼티의 값으로 반환되며 [[Set]] 프로퍼티 어트리뷰트는 데이터 프로퍼티의 값을 저장할 때 setter 함수를 호출하여 그 결과가 프로퍼티의 값으로 저장되는 프로퍼티 어트리뷰트이다.

getter // setter 함수2
접근자 프로퍼티가 반환하는 setter 함수를 통해 새로운 값을 저장한다면 setter 함수가 호출되며, 접근자 프로퍼티가 반환하는 getter 함수를 통해  값에 접근한다면 getter 함수가 호출된다.


프로토타입 prototype
프로토타입은 어떤 객체의 상위 객체의 역할을 하는 객체다.
하위 객체에게 자신의 프로퍼티와 메서드를 상속한다.
프로토타입 체인은 단방향으로 연결된다.
객체의 프로퍼티나 메서드에 접근할 때 찾는 프로퍼티나 메서드가 없다면 상위 프로토타입을 거슬러 올라가며 검색한다.


프로퍼티 정의
프로퍼티 정의란 새로운 프로퍼티를 추가하면서 프로퍼티 어트리뷰트를 명시적으로 정의하거나, 기존 프로퍼티의 프로퍼티 어트리뷰트를 재정의하는 것을 말한다.
Object.defineProperty 메서드를 사용하면 프로퍼티의 어트리뷰트를 정의할 수 있다.
인수로는 객체의 참조와 프로퍼티의 키인 문자열, 프로퍼티 디스크립터 객체를 전달한다.

객체 변경 방지
객체 확장 금지 - Object.preventExtensions
- 프로퍼티 삭제, 값 읽기,쓰기만 가능(프로퍼티 추가 불가)
객체 밀봉 - Object.seal
- 값 읽기,쓰기만 가능
객체 동결 - Object.freeze
- 프로퍼티 값 읽기만 가능
다만 위 메서드는 얕은 변경 방지로 중첩 객체까지는 영향을 주지 못한다. 객체의 중첩 객체까지 동결하여 불가능한 읽기 전용의 불변 객체를 구현하려면 객체를 값으로 갖는 모든 프로퍼티에 대해 재귀적으로 Object.freeze를 호출해야 한다.
